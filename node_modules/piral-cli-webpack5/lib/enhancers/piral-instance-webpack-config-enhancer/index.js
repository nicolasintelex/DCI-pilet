"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.piralInstanceWebpackConfigEnhancer = void 0;
const webpack_1 = require("webpack");
const helpers_1 = require("./helpers");
const piralInstanceWebpackConfigEnhancer = (options) => (compilerOptions) => {
    const { name, version, externals } = options;
    const environment = process.env.NODE_ENV || 'development';
    const variables = Object.assign(Object.assign({}, (0, helpers_1.getVariables)(name, version, externals, environment)), options.variables);
    const plugins = [new webpack_1.DefinePlugin((0, helpers_1.getDefineVariables)(variables))];
    (0, helpers_1.setEnvironment)(variables);
    compilerOptions.plugins = [...(compilerOptions.plugins || []), ...plugins];
    return compilerOptions;
};
exports.piralInstanceWebpackConfigEnhancer = piralInstanceWebpackConfigEnhancer;
//# sourceMappingURL=index.js.map